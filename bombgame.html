<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>炸彈擊中目標遊戲</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>炸彈擊中目標遊戲</h1>
        <p>按下「丟炸彈」開始遊戲，擊中目標得分！</p>
    </header>

    <div id="gameArea">
        <div id="target"></div>
        <div id="bomb" class="hidden"></div>
    </div>

    <footer>
        <button id="throwBombBtn">丟炸彈</button>
        <p id="score">得分: 0</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    background-color: #f5f5f5;
    text-align: center;
}

header {
    background-color: #4CAF50;
    color: white;
    padding: 20px;
}

#gameArea {
    position: relative;
    width: 100%;
    height: 500px;
    background-color: #e0e0e0;
    overflow: hidden;
    border: 2px solid #333;
    margin-top: 20px;
}

#target {
    position: absolute;
    width: 50px;
    height: 50px;
    background-color: red;
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    transition: top 0.5s, left 0.5s;
}

#bomb {
    position: absolute;
    width: 20px;
    height: 20px;
    background-color: yellow;
    border-radius: 50%;
    top: -30px; /* Initial off-screen */
    left: 50%;
    transform: translateX(-50%);
    transition: top 1s;
}

button {
    padding: 10px 20px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

button:hover {
    background-color: #45a049;
}

footer {
    margin-top: 20px;
}

.hidden {
    display: none;
}

// 初始化遊戲狀態
let score = 0;
let bombThrown = false;

// 取得 HTML 元素
const throwBombBtn = document.getElementById('throwBombBtn');
const target = document.getElementById('target');
const bomb = document.getElementById('bomb');
const scoreDisplay = document.getElementById('score');
const gameArea = document.getElementById('gameArea');

// 目標隨機位置移動
function moveTarget() {
    const gameAreaWidth = gameArea.offsetWidth;
    const gameAreaHeight = gameArea.offsetHeight;

    const randomX = Math.random() * (gameAreaWidth - 50); // 隨機水平位置
    const randomY = Math.random() * (gameAreaHeight - 50); // 隨機垂直位置

    target.style.left = `${randomX}px`;
    target.style.top = `${randomY}px`;
}

// 丟炸彈並處理目標擊中邏輯
function throwBomb() {
    if (bombThrown) return;

    bombThrown = true;
    bomb.classList.remove('hidden');
    bomb.style.top = '50px'; // 起始位置在上方

    const targetRect = target.getBoundingClientRect();
    const bombRect = bomb.getBoundingClientRect();

    const bombInterval = setInterval(() => {
        const bombY = parseInt(bomb.style.top.replace('px', ''));

        if (bombY >= targetRect.top && bombY <= targetRect.bottom &&
            parseInt(bomb.style.left.replace('px', '')) >= targetRect.left &&
            parseInt(bomb.style.left.replace('px', '')) <= targetRect.right) {
            // 當炸彈擊中目標時
            clearInterval(bombInterval);
            bomb.classList.add('hidden');
            score++;
            scoreDisplay.textContent = `得分: ${score}`;
            bombThrown = false;
            moveTarget(); // 目標移動
        }

        if (bombY >= gameArea.offsetHeight) {
            // 如果炸彈掉到畫面底部，重置
            clearInterval(bombInterval);
            bomb.classList.add('hidden');
            bombThrown = false;
        } else {
            bomb.style.top = `${bombY + 10}px`; // 炸彈下落
        }
    }, 20);
}

// 設定目標位置初始移動
moveTarget();

// 每次按鈕點擊，丟炸彈並觸發事件
throwBombBtn.addEventListener('click', () => {
    throwBomb();
    moveTarget(); // 每次丟炸彈後，隨機移動目標
});
